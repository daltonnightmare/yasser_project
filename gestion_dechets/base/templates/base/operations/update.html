{% extends 'base/operations/base.html' %}

{% block content %}
<h1>Modifier l'opération</h1>

<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label for="type_operation">Type d'opération</label>
        <select name="type_operation" id="type_operation" class="form-control" required>
            {% for value, label in operation_types %}
                <option value="{{ value }}" {% if operation.type_operation == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="entreprise">Entreprise</label>
        <select name="entreprise" id="entreprise" class="form-control" required>
            {% for entreprise in entreprises %}
                <option value="{{ entreprise.id }}" {% if operation.entreprise.id == entreprise.id %}selected{% endif %}>{{ entreprise.nom }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="point_collecte">Point de collecte</label>
        <select name="point_collecte" id="point_collecte" class="form-control">
            <option value="">Sélectionner un point de collecte (optionnel)</option>
            {% for point in points_collecte %}
                <option value="{{ point.id }}" {% if operation.point_collecte.id == point.id %}selected{% endif %}>{{ point.nom }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="type_dechet">Type de déchet</label>
        <select name="type_dechet" id="type_dechet" class="form-control" required>
            {% for type in types_dechets %}
                <option value="{{ type.id }}" {% if operation.type_dechet.id == type.id %}selected{% endif %}>{{ type.nom }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="quantite">Quantité (tonnes)</label>
        <input type="number" step="0.01" name="quantite" id="quantite" class="form-control" value="{{ operation.quantite }}" required>
    </div>
    <div class="form-group">
        <label for="date_operation">Date d'opération</label>
        <input type="datetime-local" name="date_operation" id="date_operation" class="form-control" value="{{ operation.date_operation|date:'Y-m-d\TH:i' }}" required>
    </div>
    <button type="submit" class="btn btn-primary">Modifier l'opération</button>
</form>
{% endblock %}
